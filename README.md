site-mapper
===========
Site Map Generation in node.js

## Installation ##

This module is intended to be used as a dependency in a website specific 
site map building project.  Add the module to the "dependencies" section
of a package.json file:

```json
{
  "dependencies": {
    "site-mapper": ">= 0.0.7"
  }
}
```

There is nothing stopping you from installing it locally and editing the embedded
configuration files, but that is not the intent.

    npm install site-mapper

## Running site-mapper ##

Create a directory to hold your site map generation configuration.  This
directory will hold all the files needed to tell site-mapper what to
create.

### Dependencies ###
Create a package.json file similar to the following:

```json
{
  "author": {
    "name": "YOUR NAME HERE",
    "email": "YOUR EMAIL HERE"
  },
  "name": "my-website-site-maps",
  "description": "sitemap generation for mysite.com",
  "version": "0.0.1",
  "homepage": "",
  "keywords": [
    "sitemap"
  ],
  "dependencies": {
    "site-mapper": ">= 0.0.7"
  },
  "engines": {
    "node": "*"
  }
}

```
    ,"coffee-script-redux": ">0"
    ,"async": ">0"

### Configuration ###

Create a directory called ./config.  For each environment you will generate sitemaps
for (possibly you only have one, production), create a javascript or
coffeescript file in the config directory named for the environment:

    ./config/production.coffee

or

    ./config/production.js

If you want to use coffeescript for configuration, you will have to add 
the coffee script module as a dependency:

```json
{
  "dependencies": {
    "site-mapper": ">= 0.0.7"
    ,"coffee-script-redux": ">0"
  }
}
```

## Sitemap Generation ##

The site-mapper module views the sitemap generation process as follows:


    +--------+          +------------+        +--------------+       +---------+
    | Source |          | SiteMapper |        | SitemapGroup |       | Sitemap |
    |--------|produces  |------------|  adds  |--------------| adds  |---------|
    |        +--------->|            |------->|              |------>|         |
    |        |  urls    |            |  urls  |              | urls  |         |
    +--------+          +------------+        +--------------+       +---------+

### Sources ###

There are three included Source implementations:

  1.  StaticSetSource - This source is configured with a static list of urls
      in a configuration file.
  1.  CsvFileSource - Reads a list of urls from a CSV file.
  1.  HttpSource - Reads urls from a HTTP service

The urls produced by Source objects can be simple strings or objects, if finer 
grained control of sitemap.xml tag values is required.

### URL Channel ###

Each url is associated with a channel.  The channel can be set per source, derived from
the url path or set explicitly if the url is an object.  The channel is used to 
name individual sitemap files.  The default behavior is to take the first path
segment as the channel.  Thus, the url

    /stuff/path/to/stuff.html

would be assigned to the 'stuff' channel and would be put in sitemaps named

### Sitemap Groups ###

A sitemap group is created for each URL channel.  As urls are added to their corresponding
SitemapGroup, the group will create sequentially numbered Sitemap files, each containing a
configurable number of urls, 50,000 by default.  The name of the sitemap files is of
the form

    ${CHANNEL}${SEQUENCE}.xml.gz

### Sitemap Index and Files ###

site-mapper will create a sitemap index and as many sitemap files as are required.  The
sitemap files are gzipped.  There is no way to turn gzipping off.

### Publishing Sitemaps to Search Engines ###

It is up to you how you expose the site maps generated by site mapper to Google and other 
search engines.  Each company does this differently, so there are no default publishing
mechanisms in site-mapper.

## Tests ##

make test

This should install all dependencies, compile the coffeescript files into
javascript and run the test suite
